# MAVLink 极简入门教程

## 什么是 MAVLink？

MAVLink 是一种轻量级的消息传输协议，主要用于无人机（UAV）和地面站之间的通信。
它设计简单、高效，非常适合资源受限的嵌入式系统。

## 本教程内容

本教程用最简单的 Python 代码演示 MAVLink 的核心功能：**心跳消息的发送和接收**。

## 文件说明

| 文件名 | 说明 |
|--------|------|
| `sender.py` | 心跳消息发送示例 |
| `receiver.py` | 心跳消息接收示例 |
| `common_setup.py` | 公共配置（共享代码） |
| `FAQ.md` | 常见问题解答 |

## 环境准备

### 第一步：安装 Python

确保你的电脑已安装 Python 3.7 或更高版本。
在命令行中输入以下命令检查：

```bash
python --version
```

### 第二步：安装 pymavlink 库

```bash
pip install pymavlink
```

如果安装失败，尝试：
```bash
python -m pip install pymavlink
```

### 第三步：验证安装

```bash
python -c "from pymavlink import mavutil; print('安装成功')"
```

## 快速开始

### 1. 接收端（先运行）

打开第一个命令行窗口，运行：
```bash
python receiver.py
```

你会看到：
```
=== MAVLink 心跳接收器 ===
等待心跳消息...
监听地址: 127.0.0.1:14550
```

### 2. 发送端（后运行）

打开第二个命令行窗口，运行：
```bash
python sender.py
```

### 3. 观察结果

在接收端窗口，你应该能看到类似输出：
```
收到心跳！来自系统ID: 1, 组件ID: 1
  飞行器类型: 2 (四旋翼)
  飞行模式: 0
  消息时间: 2026-02-16 15:30:00
```

发送端会显示：
```
发送心跳 #1
发送心跳 #2
...
```

## 停止程序

按 `Ctrl + C` 可以停止程序运行。

## 下一步学习

掌握心跳消息后，你可以学习：
1. 发送/接收位置信息（GPS）
2. 发送/接收姿态信息
3. 发送控制命令
4. 使用真实的串口连接飞控

## 需要帮助？

查看 `FAQ.md` 文件了解常见问题解答。
